spring.application.name=OMA
 
# ========================================
# DATABASE CONNECTION
# ========================================
# REQUIRED: Set these environment variables before running
# export DB_URL=jdbc:postgresql://localhost:5432/omav1
# export DB_USER=postgres
# export DB_PASS=your-password
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}
 
# ========================================
# JPA/HIBERNATE SETTINGS
# ========================================
# Let Flyway handle schema management, not Hibernate
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=${SHOW_SQL}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
 
# ========================================
# CACHE CONFIGURATION
# ========================================
spring.cache.type=${CACHE_TYPE}

# ========================================
# FLYWAY CONFIGURATION
# ========================================
# Automatically run migrations on startup
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migrations,classpath:db/seeds
spring.flyway.baseline-on-migrate=true
spring.flyway.out-of-order=true
spring.flyway.clean-disabled=false
spring.flyway.validate-on-migrate=true
# Log migration details
logging.level.org.flywaydb=DEBUG
logging.level.org.flywaydb.core=DEBUG
 
# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.root=${LOG_LEVEL_ROOT}
logging.level.com.example.OMA=${LOG_LEVEL_OMA}
logging.level.com.example.OMA.Service=${LOG_LEVEL_SERVICE}
logging.level.com.example.OMA.Controller=${LOG_LEVEL_CONTROLLER}
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
 
# ========================================
# reCAPTCHA v3 CONFIGURATION
# ========================================
# REQUIRED: Set this environment variable
# export RECAPTCHA_SECRET_KEY=your-production-secret-key
recaptcha.secret.key=${RECAPTCHA_SECRET_KEY}
logging.level.com.example.OMA.Service.RecaptchaService=DEBUG
logging.level.com.example.OMA.Controller.SurveyController=DEBUG
 
# ========================================
# ALLOWED ORIGINS (CORS)
# ========================================
# REQUIRED: Set this environment variable
# export ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
# OR (production): export ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
app.cors.allowed-origins=${ALLOWED_ORIGINS}

# ========================================
# JWT CONFIGURATION
# ========================================
# REQUIRED: Set these environment variables
# export JWT_SECRET=your-256-bit-secret-key
# export JWT_EXPIRATION=1800000 (milliseconds)
jwt.secret=${JWT_SECRET:mySecretKeyThatIsAtLeast256bitsForHS256AlgorithmSecurityRequirement}
jwt.expiration=${JWT_EXPIRATION:1800000}
